{% extends "base.html" %}

{% block site_name %}Deals{% endblock %}

{% block content %}
{% if not deals %}
    <p><div  style="text-decoration: none; color:  #2c3e50; font-size: 30px;">
        You haven't got any deals yet.
    </div></p>
{% else %}
    <div style="width: 1000px; margin: 0 auto; display: flex; align-items: flex-start; gap: 20px;">
        {% for deal in deals %}
        <div style="border: 1px solid #ccc; padding: 20px; border-radius: 10px;
             background-color: #f9f9f9; max-width: 800px; margin: 10px; align-self: center">
            <h2>{{deal.realty.name}}</h2>
            <p><strong>Type : </strong>{{deal.deal_type}}</p>
            <p><strong>Status: </strong>{{deal.status}}</p>
            <p><strong>Customer: </strong>{{deal.customer.user.full_name}}</p>
            <p><strong>Owner: </strong>{{deal.owner.user.full_name}}</p>
            {% if deal.actual_end_date %}
            <p><strong>End of payments: </strong>{{deal.actual_end_date}}</p>
            {% endif %}
            {% if user.is_staff %}
                <a href="{% url 'deal-update' deal.pk %}"
                    style="padding: 8px 16px; background-color: #2c3e50; color: white;
                    border: none;border-radius: 4px; cursor: pointer;">
                    Edit
                </a>
                <a href="{% url 'deal-delete' deal.pk %}"
                    style="padding: 8px 16px; background-color: #2c3e50; color: white;
                    border: none;border-radius: 4px; cursor: pointer; margin-left: 10px">
                    Delete
                </a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
{% endif %}
<p><a href="{% url 'estates-list' %}">‚Üê Back to estate list</a></p>
{% endblock %}